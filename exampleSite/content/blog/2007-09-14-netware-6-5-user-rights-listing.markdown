---
title: NetWare 6.5 User Rights Listing
image: images/48.jpg
date: 2007-09-14 04:52:00.000000000 -06:00
---
<a onblur="try {parent.deselectBloggerImageGracefully();} catch(e) {}" href="/images/old/secondary.gif"><img style="display:block; margin:0px auto 10px; text-align:center;cursor:pointer; cursor:hand;width: 200px;" src="/images/old/secondary.gif" border="0" alt="" /></a><br /><br />I had a hard time finding something that would list what a user has access to in eDirectory.  I then found out about trustee.nlm. It is already part of the NetWare system. If you run it, you see:<br /><br /><span style="font-weight:bold;">Syntax:<br />LOAD TRUSTEE [options] SAVE (ALL | path ) outputFile<br />LOAD TRUSTEE [options] RESTORE inputFile<br />LOAD TRUSTEE REMOVE (ALL | path )<br />LOAD TRUSTEE REMOVENULL (ALL | path )<br />LOAD TRUSTEE REMOVEINVALID (ALL | path )<br />LOAD TRUSTEE EFFECTIVE objectName outputFile<br />LOAD TRUSTEE EFFECTIVEDIR objectName outputFile<br />LOAD TRUSTEE EXCESSFILE outputFile<br />LOAD TRUSTEE EXCESSNDS outputFile<br /><br />Press any key to continue</span><br /><br />Anywho, I needed to find effective directory rights, and needed to do it for all users and groups. I couldn't figure out how to do this just for the users and groups, so I had to come up with my own solution.<br /><br />From a command prompt on Windoze workstation, I ran:<br /><span style="font-weight:bold;">nlist user >> list.txt<br />nlist group >> list.txt</span><br />This prints out all the users and groups from the current context into a file. But it also lists with it several other fields that I didn't need (i.e. Dis, Log, Exp, Min, etc.)<br /><br />So, awk to the rescue:<br /><span style="font-weight:bold;">awk '{print $1}' list.txt >> cleanlist.txt</span><br />This grabs the first word in the file which happens to be the object name and outputs it to a new file.  I also cleaned up the file afterwards for a few comments that were not needed (using vi).<br /><br />Now we have the userlist, but we need to prepend and append the right commands and syntax so it should look like this:<br /><span style="font-weight:bold;">trustee effectivedir "cn=BOB.ou=SLC.o=DA1" sys:output.txt</span><br /><br />I did this by opening the cleanlist.txt in vi, then:<br /><span style="font-weight:bold;">:g/^/s//trustee effectivedir "cn=/g</span><br />and<br /><span style="font-weight:bold;">:g/$/s// sys:output.txt/g</span><br /><br />This is a search and replace command in vi.  It searches for the first of the line "^" and prepends it with "trustee effectivedir "cn=" <br />The last command above then searches for the end of line character "$" and appends "sys:output.txt"<br />It hen does this to every line in the file.<br /><br />Finally,  I'm going to setup a cron script to run monthly that will create the file with all the rights listed.  We can then grep the file for specific volumes or directories.<br /><br />This might be done more easily, but wasn't able to find anything with Novell's current tools.<br />  Also, this doesn't account for any other users/objects added later.  I'll need to find something more dynamic if possible.
